<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="Encabezado">
        <select name="s-producto" id="s-producto">
            <option value="1">1</option>
            <option value="2"2></option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>

            

            

        </select>
    </div>
    <div id="Ficha">
        <h1 id="title"></h1>
    </div>
    <div>
        <img id="imagen" width="100px">
    </div>    
    <div>
        <h1 id="description"></h1>
    </div>   

    
</body>
</html>

<script>
    document.querySelector("#s-producto").addEventListener("change"), (evento);

    
    const URL = "https://dummyjson.com/products/1";
    var xmlHttp = new XMLHttpRequest     // Funciones callback, son las hechas por parte de alguien (hay un cambio en la petición, por tanto esa función se ejecuta).
    xmlHttp.onreadystatechange = function () {  // Ojo ésta función no se ejecuta aún, sólo está escrita. Se invoca cuando cambie el estado. 
        if (xmlHttp.readyState == 4){
            if (xmlHttp.readyState ==4 ) {
                if (xmlHttp.status == 200){ // Si ya ha respondido y es OK...
                    console.log("Consultar el servidor retorna el JSON:");
                    console.log(xmlHttp.responseText);
                    mostrar(JSON.parse(xmlHttp.responseText));  // Metodo de clase (ESTÁTICO)
                    /* Obtendrá, JSON con info del teléfono. Ej. (El JSon se ve formateado en Firefox browser): 
                    {"id":1,"title":"iPhone 9","description":"An apple mobile which is nothing like apple"
                    ,"price":549,"discountPercentage":12.96,"rating":4.69,"stock":94,"brand":"Apple"
                    ,"category":"smartphones","thumbnail":"https://cdn.dummyjson.com/product-images/1/thumbnail.jpg","images":["https://cdn.dummyjson.com/product-images/1/1.jpg","https://cdn.dummyjson.com/product-images/1/2.jpg","https://cdn.dummyjson.com/product-images/1/3.jpg","https://cdn.dummyjson.com/product-images/1/4.jpg","https://cdn.dummyjson.com/product-images/1/thumbnail.jpg"]}*/
                }
            }
        }
    }
    xmlHttp.open("GET", URL, false); // Abrir petición de tipo GET (false es que es asíncrona, true-> síncrono, o sea espero la respuesta)
    xmlHttp.send(null); // 

    function mostrarLoading(){
        document.querySelector("#title").innerHTML("<img src='/loading.gif'>");
    }

    function mostrar(producto){
        document.querySelector("#title").innerHTML=producto.title; 
        //console.debug("producto.title:"+producto.title);  
        document.querySelector("#imagen").setAttribute("src",producto.thumbnail);   // iPhone 9       //console.debug("producto.title:"+producto.title);
        
        document.querySelector("#description").innerHTML=producto.description;      
    }

</script>